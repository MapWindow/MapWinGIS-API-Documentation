(function(n){var t=function(n){var t=n.clone(),i=n.find("canvas"),r;return i.length&&(r=t.find("canvas"),r.each(function(n){var t=this.getContext("2d");t.drawImage(i.get(n),0,0)})),t};n.fn.quicksand=function(i,r){var u={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",adjustWidth:"auto",useScaling:!1,enhancement:function(){},selector:"> *",atomic:!1,dx:0,dy:0,maxWidth:0,retainExisting:!0},e=function(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),i=document.createElement("div"),n=0;n<t.length;n++)if(typeof i.style[t[n]]!="undefined")return!0;return!1}(),f;return n.extend(u,r),e&&typeof n.fn.scale!="undefined"||(u.useScaling=!1),typeof arguments[1]=="function"?f=arguments[1]:typeof(arguments[2]=="function")&&(f=arguments[2]),this.each(function(r){var y,s=[],a,b,k,h,c,d,tt;a=typeof u.attribute=="function"?n(i):t(n(i).filter("["+u.attribute+"]"));var e=n(this),st=n(this).css("height"),it=n(this).css("width"),p,g,rt=!1,ut=!1,ft=n(e).offset(),w=[],v=n(this).find(u.selector),et=n(v).innerWidth();if(navigator.userAgent.match(/msie [6]/i)){e.html("").append(a);return}var ot=0,nt=function(){var t,i;n(this).css("margin","").css("position","").css("top","").css("left","").css("opacity","");ot||(ot=1,u.atomic||(t=e.find(u.selector),u.retainExisting?(i=n([]),h.find(u.selector).each(function(r){var f=n([]),o;typeof u.attribute=="function"?(o=u.attribute(n(this)),t.each(function(){if(u.attribute(this)==o)return f=n(this),!1})):f=t.filter("["+u.attribute+'="'+n(this).attr(u.attribute)+'"]');f.length>0&&(i=i.add(f),r===0?e.prepend(f):f.insertAfter(e.find(u.selector).get(r-1)))}),t.not(i).remove()):(e.prepend(h.find(u.selector)),t.remove()),rt&&e.css("height",p),ut&&e.css("width",it)),u.enhancement(e),typeof f=="function"&&f.call(this));!1===u.adjustHeight&&e.css("height","auto");!1===u.adjustWidth&&e.css("width","auto")},l=e.offsetParent(),o=l.offset();if(l.css("position")=="relative"?l.get(0).nodeName.toLowerCase()!="body"&&(o.top+=parseFloat(l.css("border-top-width"))||0,o.left+=parseFloat(l.css("border-left-width"))||0):(o.top-=parseFloat(l.css("border-top-width"))||0,o.left-=parseFloat(l.css("border-left-width"))||0,o.top-=parseFloat(l.css("margin-top"))||0,o.left-=parseFloat(l.css("margin-left"))||0),isNaN(o.left)&&(o.left=0),isNaN(o.top)&&(o.top=0),o.left-=u.dx,o.top-=u.dy,e.css("height",n(this).height()),e.css("width",n(this).width()),v.each(function(t){w[t]=n(this).offset()}),n(this).stop(),b=0,k=0,v.each(function(t){n(this).stop();var i=n(this).get(0);i.style.position=="absolute"?(b=-u.dx,k=-u.dy):(b=u.dx,k=u.dy);i.style.position="absolute";i.style.margin="0";u.adjustWidth||(i.style.width=et+"px");i.style.top=w[t].top-parseFloat(i.style.marginTop)-o.top+k+"px";i.style.left=w[t].left-parseFloat(i.style.marginLeft)-o.left+b+"px";u.maxWidth>0&&w[t].left>u.maxWidth&&(i.style.display="none")}),h=t(n(e)),c=h.get(0),c.innerHTML="",c.setAttribute("id",""),c.style.height="auto",c.style.width=e.width()+"px",h.append(a),h.insertBefore(e),h.css("opacity",0),c.style.zIndex=-1,c.style.margin="0",c.style.position="absolute",c.style.top=ft.top-o.top+"px",c.style.left=ft.left-o.left+"px",u.adjustHeight==="dynamic"?e.animate({height:h.height()},u.duration,u.easing):u.adjustHeight==="auto"&&(p=h.height(),parseFloat(st)<parseFloat(p)?e.css("height",p):rt=!0),u.adjustWidth==="dynamic"?e.animate({width:h.width()},u.duration,u.easing):u.adjustWidth==="auto"&&(g=h.width(),parseFloat(it)<parseFloat(g)?e.css("width",g):ut=!0),v.each(function(){var t=[];typeof u.attribute=="function"?(y=u.attribute(n(this)),a.each(function(){if(u.attribute(this)==y)return t=n(this),!1})):t=a.filter("["+u.attribute+'="'+n(this).attr(u.attribute)+'"]');t.length?u.useScaling?s.push({element:n(this),dest:t,style:{top:n(this).offset().top,left:n(this).offset().left,opacity:""},animation:{top:t.offset().top-o.top,left:t.offset().left-o.left,opacity:1,scale:"1.0"}}):s.push({element:n(this),dest:t,style:{top:n(this).offset().top,left:n(this).offset().left,opacity:""},animation:{top:t.offset().top-o.top,left:t.offset().left-o.left,opacity:1}}):u.useScaling?s.push({element:n(this),style:{top:n(this).offset().top,left:n(this).offset().left,opacity:""},animation:{opacity:"0.0",scale:"0.0"}}):s.push({element:n(this),style:{top:n(this).offset().top,left:n(this).offset().left,opacity:""},animation:{opacity:"0.0"}})}),a.each(function(){var h=[],i=[],c,r,f;typeof u.attribute=="function"?(y=u.attribute(n(this)),v.each(function(){if(u.attribute(this)==y)return h=n(this),!1}),a.each(function(){if(u.attribute(this)==y)return i=n(this),!1})):(h=v.filter("["+u.attribute+'="'+n(this).attr(u.attribute)+'"]'),i=a.filter("["+u.attribute+'="'+n(this).attr(u.attribute)+'"]'));h.length===0&&i.length>0&&(c=u.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"},r=t(i),f=r.get(0),f.style.position="absolute",f.style.margin="0",u.adjustWidth||(f.style.width=et+"px"),f.style.top=i.offset().top-o.top+"px",f.style.left=i.offset().left-o.left+"px",r.css("opacity",0),u.useScaling&&r.scale(0),r.appendTo(e),(u.maxWidth===0||i.offset().left<u.maxWidth)&&s.push({element:n(r),dest:i,animation:c}))}),h.remove(),u.atomic){for($toDelete=e.find(u.selector),e.prepend(h.find(u.selector)),r=0;r<s.length;r++)s[r].dest&&s[r].style?(d=s[r].dest,tt=d.offset(),d.css({position:"relative",top:s[r].style.top-tt.top,left:s[r].style.left-tt.left}),d.animate({top:"0",left:"0"},u.duration,u.easing,nt)):s[r].element.animate(s[r].animation,u.duration,u.easing,nt);$toDelete.remove()}else for(u.enhancement(e),r=0;r<s.length;r++)s[r].element.animate(s[r].animation,u.duration,u.easing,nt)})}})(jQuery);
//# sourceMappingURL=jquery.quicksand.min.js.map
