<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="description" content="MapWinGIS.ocx is used to provide GIS and mapping functionality to any Windows Forms based custom software application."/>
<meta name="keywords" content="MapWinGIS, v5.4, 'open source', free, gis, map, mapping, documentation"/>
<meta name="author" content="MapWindow GIS Community">
<title>MapWinGIS: OGR layer editing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mapwingis.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="header-logos">
	<div id="project-logo">
		<img alt="Logo" src="mapwingis_logo5-100px.png" />
	</div>
	<div id="sponsors">
	    <a href="https://www.topx-group.nl/?utm_source=MapWindow&utm_medium=cpc" target="_blank" title="TopX Geo-ICT provides man power">
	      <img src="topx.jpg" alt=""/></a>
		<a href="https://www.jetbrains.com/?utm_source=MapWindow&utm_medium=cpc" target="_blank" title="ReSharper is a great tool to optimize our code">
	      <img src="jetbrains.png" alt=""/></a>
		<div class="footer-ad visible-sm visible-xs" data-type="ad" data-publisher="mapwindow.org" data-format="300x250" data-zone="ros" data-tags="GIS%2cMapping%2cMap%2cC%23%2cMaps%2cWMS%2cgeospatial"></div>	  
	</div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__ogrlayer__editing.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#prop-members">Properties</a>  </div>
  <div class="headertitle"><div class="title">OGR layer editing</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaff711c044e2b761e914230eac2e244a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#gaff711c044e2b761e914230eac2e244a5">OgrLayer.get_SupportsEditing</a> (<a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfd">tkOgrSaveType</a> editingType)</td></tr>
<tr class="memdesc:gaff711c044e2b761e914230eac2e244a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether the layer supports editing.  <a href="group__ogrlayer__editing.html#gaff711c044e2b761e914230eac2e244a5">More...</a><br /></td></tr>
<tr class="separator:gaff711c044e2b761e914230eac2e244a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38b62668b4d0d6a9d451204b059177af"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#ga38b62668b4d0d6a9d451204b059177af">OgrLayer.get_UpdateSourceErrorMsg</a> (int errorIndex)</td></tr>
<tr class="memdesc:ga38b62668b4d0d6a9d451204b059177af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a specified error message from the log registered during <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> call.  <a href="group__ogrlayer__editing.html#ga38b62668b4d0d6a9d451204b059177af">More...</a><br /></td></tr>
<tr class="separator:ga38b62668b4d0d6a9d451204b059177af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae276464b72c07572fa53b726aea2608d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#gae276464b72c07572fa53b726aea2608d">OgrLayer.get_UpdateSourceErrorShapeIndex</a> (int errorIndex)</td></tr>
<tr class="memdesc:gae276464b72c07572fa53b726aea2608d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets shape index associated with specified error message from the log registered during <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> call.  <a href="group__ogrlayer__editing.html#gae276464b72c07572fa53b726aea2608d">More...</a><br /></td></tr>
<tr class="separator:gae276464b72c07572fa53b726aea2608d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb0d3b7c9d17bcdb7e293c037f71816b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_enumerations_8cs.html#abb17448d7d496b648ffbc0460325f728">tkOgrSaveResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b">OgrLayer.SaveChanges</a> (out int savedCount, <a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfd">tkOgrSaveType</a> saveType=<a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfda63740585fc322ac2f9fab28d323c954d">tkOgrSaveType.ostSaveAll</a>, bool validateShapes=true)</td></tr>
<tr class="memdesc:gabb0d3b7c9d17bcdb7e293c037f71816b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves local changes to the datasource.  <a href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b">More...</a><br /></td></tr>
<tr class="separator:gabb0d3b7c9d17bcdb7e293c037f71816b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="prop-members" name="prop-members"></a>
Properties</h2></td></tr>
<tr class="memitem:ga459d197a4b76c61203d356c216858cd0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#ga459d197a4b76c61203d356c216858cd0">OgrLayer.DataIsReprojected</a><code> [get]</code></td></tr>
<tr class="memdesc:ga459d197a4b76c61203d356c216858cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether underlying data ( <a class="el" href="class_ogr_layer.html#a1a2ffbbd78168673391a0b1db054ae43" title="Gets layer data represented as in-memory shapefile.">OgrLayer.GetBuffer</a> ) was reprojected.  <a href="group__ogrlayer__editing.html#ga459d197a4b76c61203d356c216858cd0">More...</a><br /></td></tr>
<tr class="separator:ga459d197a4b76c61203d356c216858cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab600c338302574979a75ca17c651d5dc"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#gab600c338302574979a75ca17c651d5dc">OgrLayer.FIDColumnName</a><code> [get]</code></td></tr>
<tr class="memdesc:gab600c338302574979a75ca17c651d5dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets name of feature ID column.  <a href="group__ogrlayer__editing.html#gab600c338302574979a75ca17c651d5dc">More...</a><br /></td></tr>
<tr class="separator:gab600c338302574979a75ca17c651d5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeab4d012f5ca48fd9b1eebf7fea0f17c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ogrlayer__editing.html#gaeab4d012f5ca48fd9b1eebf7fea0f17c">OgrLayer.UpdateSourceErrorCount</a><code> [get]</code></td></tr>
<tr class="memdesc:gaeab4d012f5ca48fd9b1eebf7fea0f17c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the number of errors registered in the log during <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> call.  <a href="group__ogrlayer__editing.html#gaeab4d012f5ca48fd9b1eebf7fea0f17c">More...</a><br /></td></tr>
<tr class="separator:gaeab4d012f5ca48fd9b1eebf7fea0f17c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Here is a list of methods and properties to save changes made to <a class="el" href="class_ogr_layer.html" title="Represents a single layer in GDAL/OGR datasource or result of SQL query against such datasource.">OgrLayer</a> back to datasource. The properties and methods described here belong to <a class="el" href="class_ogr_layer.html" title="Represents a single layer in GDAL/OGR datasource or result of SQL query against such datasource.">OgrLayer</a> class.<br  />
 </p><div class="dotgraph">
<img src="dot_inline_dotgraph_25.png" alt="dot_inline_dotgraph_25.png" border="0" usemap="#dot_inline_dotgraph_25.map"/>
<map name="dot_inline_dotgraph_25.map" id="dot_inline_dotgraph_25.map"><area shape="rect" href="class_ogr_layer.html" title="OgrLayer" alt="" coords="30,5,145,35"/>
<area shape="poly" href="group__ogrlayer__editing.html" title="OGR layer editing" alt="" coords="169,100,165,94,154,90,136,86,113,83,87,83,62,83,39,86,21,90,9,94,5,100,9,105,21,110,39,113,62,116,87,117,113,116,136,113,154,110,165,105"/>
</map>
</div>
<p> <a href="diagrams.html">Graph description</a><br  />
 Editing of underlying in-memory shapefile can be done for all types of OGR layers. <br  />
 However saving of these changes back to datasource isn't always possible because of following reasons:<br  />
</p><ul>
<li>it isn't supported by driver;</li>
<li>forUpdate flag parameter wasn't specified on opening the layer;</li>
<li>layer was opened from SQL query;</li>
<li>data was reprojected during adding to the map;</li>
<li>layer doesn't have feature ID column.<br  />
 Use <a class="el" href="group__ogrlayer__editing.html#gaff711c044e2b761e914230eac2e244a5" title="Gets a value indicating whether the layer supports editing.">OgrLayer.get_SupportsEditing</a> to check if saving is possible for current layer.<br  />
 Feature ID column corresponds to primary key in database table. Such column will be added as first field in attribute table of shapefile (with index 0). This field must not be edited by client code. The presence of feature ID column can be tested with OgrLayer.FidColumnName property which will return empty string if no such column exists.<br  />
 To save the changes to datasource <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> method should be called. It supports saving of the following types of changes (provided that other preconditions are met ):</li>
<li>editing of values in attribute table;</li>
<li>any editing of geometry of individual shapes;</li>
<li>adding of new shapes;</li>
<li>deleting of exiting shapes.<br  />
 <dl class="section note"><dt>Note</dt><dd><a class="el" href="class_ogr_layer.html" title="Represents a single layer in GDAL/OGR datasource or result of SQL query against such datasource.">OgrLayer</a> doesn't support any changes in order or number of fields in attribute table. Therefore fields must not be added or deleted in order for <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> to work.<br  />
 Edited shapes must be marked with modified flag via <a class="el" href="group__shapefile__editing.html#ga4ba8e71e3730e781c3165d6d0e79d1bd" title="Sets a value indicating whether particular shape was modified after shapefile was opened.">Shapefile.set_ShapeModified</a>. See code sample in <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> documentation.<br  />
 Errors during the saving operation are registered in the log which can be accessed using <a class="el" href="group__ogrlayer__editing.html#ga38b62668b4d0d6a9d451204b059177af" title="Gets a specified error message from the log registered during OgrLayer.SaveChanges call.">OgrLayer.get_UpdateSourceErrorMsg</a>.<br  />
 <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> method may change the order of rows in the database table (for example PostgreSQL driver places the updated rows in the end of table). Therefore on reloading of layer after the SaveChanges operation indices of shapes may change.</dd></dl>
The following code demonstrates how various types of editing for OGR layer can be made with saving of changes back to the datasource. <div class="fragment"><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">string</span> CONNECTION_STRING = <span class="stringliteral">&quot;PG:host=localhost dbname=london user=postgres password=1234&quot;</span>;</div>
<div class="line"> </div>
<div class="line">var layer = <span class="keyword">new</span> <a class="code hl_class" href="class_ogr_layer.html">OgrLayer</a>();</div>
<div class="line">layer.GlobalCallback = form;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> forUpdate = <span class="keyword">true</span>;</div>
<div class="line"><span class="keywordflow">if</span> (!layer.OpenFromDatabase(CONNECTION_STRING, <span class="stringliteral">&quot;buildings&quot;</span>, forUpdate))</div>
<div class="line">{</div>
<div class="line">    Debug.Print(<span class="stringliteral">&quot;Failed to open layer: &quot;</span> + layer.get_ErrorMsg(layer.LastErrorCode));</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// check if editing is supported for driver</span></div>
<div class="line">Debug.Print(<span class="stringliteral">&quot;Driver supports editing: &quot;</span> + layer.TestCapability(<a class="code hl_enumeration" href="_enumerations_8cs.html#a63e27a2457eb95ef32913129bb033f14">tkOgrLayerCapability</a>.olcRandomWrite));</div>
<div class="line"> </div>
<div class="line">now check <span class="keywordflow">if</span> we can actually <span class="keywordflow">do</span> it, as there can be other limitations</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (!layer.get_SupportsEditing(<a class="code hl_enumeration" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfd">tkOgrSaveType</a>.ostSaveAll))</div>
<div class="line">{</div>
<div class="line">    Debug.Print(<span class="stringliteral">&quot;Can&#39;t edit a layer: &quot;</span> + layer.get_ErrorMsg(layer.LastErrorCode));</div>
<div class="line">    layer.Close();</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">var sf = layer.GetBuffer();</div>
<div class="line"><span class="keywordflow">if</span> (sf != <span class="keyword">null</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// possible types of editing</span></div>
<div class="line">    <span class="keywordtype">bool</span> editValue = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> addShape = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> editShape = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> removeShape = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (editValue)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">int</span> shapeIndex = 0;</div>
<div class="line">        <span class="keywordtype">int</span> fieldIndex = 2;</div>
<div class="line">        <span class="keywordtype">object</span> val = sf.get_CellValue(fieldIndex, shapeIndex);</div>
<div class="line">        sf.EditCellValue(fieldIndex, shapeIndex, <span class="stringliteral">&quot;test_writing&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// this flag will notify the driver that changes should saved back to source</span></div>
<div class="line">        sf.ShapeModified[shapeIndex] = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (addShape)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">int</span> shapeIndex = sf.NumShapes;</div>
<div class="line">        var shp = sf.get_Shape(0);</div>
<div class="line">        shp = shp.Buffer(1, 50);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// modified flag is set automatically in this case</span></div>
<div class="line">        <span class="keywordtype">bool</span> result = sf.EditInsertShape(shp, ref shapeIndex);</div>
<div class="line">        Debug.Print(<span class="stringliteral">&quot;Shape was inserted: &quot;</span> + result);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (editShape)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// since shapefile is in in-memory mode, geometry of shapes can be changed directly;</span></div>
<div class="line">        <span class="comment">// bear in mind that this won&#39;t work for file-based shapefiles, in that case get_Shape will</span></div>
<div class="line">        <span class="comment">// populate Shape object which will have no further link with parent shapefile</span></div>
<div class="line">        var shp = sf.get_Shape(sf.NumShapes - 1);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; shp.NumPoints; i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">double</span> x = 0.0, y = 0.0;</div>
<div class="line">            <span class="keywordflow">if</span> (shp.get_XY(i, ref x, ref y))</div>
<div class="line">                shp.put_XY(i, x + 0.01, y + 0.01);  <span class="comment">// let&#39;s move it a little</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (removeShape)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">bool</span> result = sf.EditDeleteShape(sf.NumShapes - 1);</div>
<div class="line">        Debug.Print(<span class="stringliteral">&quot;Shape was deleted: &quot;</span> + result);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// saving it</span></div>
<div class="line">    <span class="keywordtype">int</span> count;</div>
<div class="line">    var saveResults = layer.SaveChanges(out count);</div>
<div class="line"> </div>
<div class="line">    Debug.Print(<span class="stringliteral">&quot;Save result: &quot;</span> + saveResults.ToString());</div>
<div class="line">    Debug.Print(<span class="stringliteral">&quot;Number of shapes saved: &quot;</span> + count);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// displaying info on errors</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; layer.UpdateSourceErrorCount; i++)</div>
<div class="line">    {</div>
<div class="line">        Debug.Print(<span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;Error for shape id {0}: {1}&quot;</span>,</div>
<div class="line">        layer.UpdateSourceErrorShapeIndex[i], layer.UpdateSourceErrorMsg[i]));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line">layer.Close();</div>
<div class="line"><span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="ttc" id="a_enumerations_8cs_html_a63e27a2457eb95ef32913129bb033f14"><div class="ttname"><a href="_enumerations_8cs.html#a63e27a2457eb95ef32913129bb033f14">tkOgrLayerCapability</a></div><div class="ttdeci">tkOgrLayerCapability</div><div class="ttdoc">List of capabilities that might or might not be supported by particular OGR driver.</div><div class="ttdef"><b>Definition:</b> Enumerations.cs:2245</div></div>
<div class="ttc" id="a_enumerations_8cs_html_a94aa558ddfcfeeecaa47edf872557bfd"><div class="ttname"><a href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfd">tkOgrSaveType</a></div><div class="ttdeci">tkOgrSaveType</div><div class="ttdoc">Defines possible subjects of OgrLayer.SaveChanges method.</div><div class="ttdef"><b>Definition:</b> Enumerations.cs:2224</div></div>
<div class="ttc" id="aclass_ogr_layer_html"><div class="ttname"><a href="class_ogr_layer.html">OgrLayer</a></div><div class="ttdoc">Represents a single layer in GDAL/OGR datasource or result of SQL query against such datasource.</div><div class="ttdef"><b>Definition:</b> OgrLayer.cs:245</div></div>
</div><!-- fragment --> </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaff711c044e2b761e914230eac2e244a5" name="gaff711c044e2b761e914230eac2e244a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaff711c044e2b761e914230eac2e244a5">&#9670;&nbsp;</a></span>get_SupportsEditing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OgrLayer.get_SupportsEditing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfd">tkOgrSaveType</a>&#160;</td>
          <td class="paramname"><em>editingType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a value indicating whether the layer supports editing. </p>
<p >The property works like this:<br  />
1) checks whether underlying driver supports random write operation: OgrLayer.TestCapability(tkOgrLayerCapability::olcRandomWrite);<br  />
2) the presence of Feature Id column is verified;<br  />
3) checks if the data is still in the same projection (<a class="el" href="group__ogrlayer__editing.html#ga459d197a4b76c61203d356c216858cd0" title="Gets a value indicating whether underlying data ( OgrLayer.GetBuffer ) was reprojected.">OgrLayer.DataIsReprojected</a>).<br  />
 <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> method doesn't make the first check, thus trying to write the data even if functionality isn't advertised by driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">editingType</td><td>The requested type of editing.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True in case editing is supported.</dd></dl>

</div>
</div>
<a id="ga38b62668b4d0d6a9d451204b059177af" name="ga38b62668b4d0d6a9d451204b059177af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38b62668b4d0d6a9d451204b059177af">&#9670;&nbsp;</a></span>get_UpdateSourceErrorMsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string OgrLayer.get_UpdateSourceErrorMsg </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errorIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a specified error message from the log registered during <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> call. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorIndex</td><td>Index of error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error message or empty string on invalid index.</dd></dl>

</div>
</div>
<a id="gae276464b72c07572fa53b726aea2608d" name="gae276464b72c07572fa53b726aea2608d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae276464b72c07572fa53b726aea2608d">&#9670;&nbsp;</a></span>get_UpdateSourceErrorShapeIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OgrLayer.get_UpdateSourceErrorShapeIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errorIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets shape index associated with specified error message from the log registered during <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> call. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorIndex</td><td>Error index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Index of shape in underlying in-memory shapefile (<a class="el" href="class_ogr_layer.html#a1a2ffbbd78168673391a0b1db054ae43" title="Gets layer data represented as in-memory shapefile.">OgrLayer.GetBuffer()</a>).</dd></dl>

</div>
</div>
<a id="gabb0d3b7c9d17bcdb7e293c037f71816b" name="gabb0d3b7c9d17bcdb7e293c037f71816b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb0d3b7c9d17bcdb7e293c037f71816b">&#9670;&nbsp;</a></span>SaveChanges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_enumerations_8cs.html#abb17448d7d496b648ffbc0460325f728">tkOgrSaveResult</a> OgrLayer.SaveChanges </td>
          <td>(</td>
          <td class="paramtype">out int&#160;</td>
          <td class="paramname"><em>savedCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfd">tkOgrSaveType</a>&#160;</td>
          <td class="paramname"><em>saveType</em> = <code><a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfda63740585fc322ac2f9fab28d323c954d">tkOgrSaveType.ostSaveAll</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>validateShapes</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves local changes to the datasource. </p>
<p >To check whether the operation is supported for current layer use <a class="el" href="group__ogrlayer__editing.html#gaff711c044e2b761e914230eac2e244a5" title="Gets a value indicating whether the layer supports editing.">OgrLayer.get_SupportsEditing</a>.<br  />
 The method works like this:<br  />
 1) Underlying shapefile is analyzed for changes, i.e. for shapes with <a class="el" href="group__shapefile__editing.html#ga76d9afe80bd30b87b03a0cea894a82f0" title="Gets a value indicating whether particular shape was modified after shapefile was opened.">Shapefile.get_ShapeModified</a> property set to true. <br  />
2) For each of such shapes UPDATE statement is generated by driver. Shapes are identified in source by the value of Feature ID column.<br  />
3) If update operation for particular shape fails the error is registered in: <a class="el" href="group__ogrlayer__editing.html#ga38b62668b4d0d6a9d451204b059177af" title="Gets a specified error message from the log registered during OgrLayer.SaveChanges call.">OgrLayer.get_UpdateSourceErrorMsg()</a>.<br  />
 The operation may fail for a particular shape because of 2 main reasons:</p><ul>
<li>shape is invalid, while validateShapes parameter set to true;</li>
<li>new values aren't accepted by datasource, which often can maintain stricter data constraints. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">savedCount</td><td>Returns number of saved changed.</td></tr>
    <tr><td class="paramname">saveType</td><td>Sets which part of data should be saved, geometry, attributes or both. Default value is <a class="el" href="_enumerations_8cs.html#a94aa558ddfcfeeecaa47edf872557bfda63740585fc322ac2f9fab28d323c954d" title="Both shapes and attributes of associated in-memory shapefile will be saved.">tkOgrSaveType.ostSaveAll</a> (i.e. both geometry and attributes).</td></tr>
    <tr><td class="paramname">validateShapes</td><td>Sets whether shapes will be validated before saving. Default value is true, i.e. invalid shapes won't be saved.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result of the operation.</dd></dl>

</div>
</div>
<h2 class="groupheader">Properties</h2>
<a id="ga459d197a4b76c61203d356c216858cd0" name="ga459d197a4b76c61203d356c216858cd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga459d197a4b76c61203d356c216858cd0">&#9670;&nbsp;</a></span>DataIsReprojected</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool OgrLayer.DataIsReprojected</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a value indicating whether underlying data ( <a class="el" href="class_ogr_layer.html#a1a2ffbbd78168673391a0b1db054ae43" title="Gets layer data represented as in-memory shapefile.">OgrLayer.GetBuffer</a> ) was reprojected. </p>
<p >This may happen because of projection mismatch on adding it to the map. See <a class="el" href="class_global_settings.html#a3b13db883be4cef7fd2f04fc0e7ccf7f" title="Gets or sets a value which determines whether automatic on-the-fly reprojection of the vector layer w...">GlobalSettings.ReprojectLayersOnAdding</a> for details. </p>

</div>
</div>
<a id="gab600c338302574979a75ca17c651d5dc" name="gab600c338302574979a75ca17c651d5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab600c338302574979a75ca17c651d5dc">&#9670;&nbsp;</a></span>FIDColumnName</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string OgrLayer.FIDColumnName</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets name of feature ID column. </p>
<p >Feature ID column corresponds to primary key in underlying database table. It is used to uniquely identify features and to save changes back to datasource. Feature ID column (if present) will always be inserted as a first field of attribute table of underlying shapefile. This field must not be edited.<br  />
 For inserted features the column values are set to NULL. <br  />
 In case underlying datasource doesn't have feature ID column, an empty string will be returned.</p>

</div>
</div>
<a id="gaeab4d012f5ca48fd9b1eebf7fea0f17c" name="gaeab4d012f5ca48fd9b1eebf7fea0f17c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeab4d012f5ca48fd9b1eebf7fea0f17c">&#9670;&nbsp;</a></span>UpdateSourceErrorCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int OgrLayer.UpdateSourceErrorCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the number of errors registered in the log during <a class="el" href="group__ogrlayer__editing.html#gabb0d3b7c9d17bcdb7e293c037f71816b" title="Saves local changes to the datasource.">OgrLayer.SaveChanges</a> call. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 30 2022 15:41:48 for MapWinGIS by 
		<a href="https://www.doxygen.org/index.html">
			<img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/>
		</a> 1.9.3 
	</li>
  </ul>
</div>
<footer>
<div data-type="ad" data-publisher="mapwindow.org" data-format="728x90" data-zone="ros" data-tags="open-source%2cgis%2cc#%2cc++%2capi%2cgeographical%2cgdal%2cproj%2cgeos"></div>
</footer>
<script type='text/javascript'>
function _dmBootstrap(file) {
    var _dma = document.createElement('script');
    _dma.type = 'text/javascript';
    _dma.async = true;
    _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
}
function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js'); }
(function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000); })();
</script>
</body>
</html>
